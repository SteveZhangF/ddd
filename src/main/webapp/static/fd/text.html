<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>文本框</title>
</head>
<body>
<div class="content">
    <table class="table table-bordered table-striped table-hover">
        <tr>
            <th><span>Component Name</span><span class="label label-important">*</span></th>
            <th><span>Default</span></th>
        </tr>
        <tr>
            <td><input type="text" id="orgname" placeholder="required"></td>
            <td><input type="text" id="orgvalue" placeholder=""></td>
        </tr>
        <tr>
            <th><span>Type</span></th>
            <th><span>Align</span></th>
        </tr>
        <tr>
            <td>
                <select id="orgtype">
                    <option value="text">Text</option>
                    <option value="email">Email Address</option>
                    <option value="int">Integer</option>
                    <option value="float">Float</option>
                    <option value="ssn">SSN</option>
                </select>
            </td>
            <td>
                <select id="orgalign">
                    <option value="left">Left</option>
                    <option value="center">Center</option>
                    <option value="right">Right</option>
                </select>
            </td>
        </tr>
        <tr>
            <th>
                <span>&nbsp;&nbsp;&nbsp;&nbsp;Height&nbsp;&nbsp;X&nbsp;&nbsp;Width&nbsp;&nbsp;&nbsp;&&nbsp;&nbsp;&nbsp;Font Size</span>
            </th>
            <th><span>Viably</span></th>
        </tr>
        <tr>
            <td>
                <input id="orgwidth" type="text" value="150" class="input-small span1" placeholder="auto"/>
                X
                <input id="orgheight" type="text" value="" class="input-small span1" placeholder="auto"/>
                &
                <input id="orgfontsize" type="text" value="" class="input-small span1" placeholder="auto"/> px

            </td>
            <td>
                <label class="checkbox inline"><input id="orghide" type="checkbox"/> Hidden </label>
            </td>
        </tr>

    </table>
</div>
<script type="text/javascript">

    function createElement(type, name) {
        var element = null;
        try {
            element = document.createElement('<' + type + ' name="' + name + '">');
        } catch (e) {
        }
        if (element == null) {
            element = document.createElement(type);
            element.name = name;
        }
        return element;
    }
    $G = function (id) {
        return document.getElementById(id)
    };
    var oNode = null;
    var ok = function () {

        if ($('#orgname').value == '') {
            alert('Please input the name');
            return false;
        }
        var gValue = $G('orgvalue').value.replace("\"", "&quot;"),
                gTitle = $G('orgname').value.replace("\"", "&quot;"),
                gFontSize = $G('orgfontsize').value,
                gAlign = $G('orgalign').value,
                gWidth = $G('orgwidth').value,
                gHeight = $G('orgheight').value,
                gType = $G('orgtype').value;
        try {
            if(oNode==null)oNode = createElement('input', 'leipiNewField');
            oNode.setAttribute('type', 'text');
            oNode.setAttribute('title', gTitle);
            oNode.setAttribute('value', gValue);
            oNode.setAttribute('name', 'leipiNewField');
            oNode.setAttribute('leipiPlugins', "text");
            if ($G('orghide').checked) {
                oNode.setAttribute('orghide', 1);
            } else {
                oNode.setAttribute('orghide', 0);
            }
            if (gFontSize != '') {
                oNode.style.fontSize = gFontSize + 'px';
                //style += 'font-size:' + gFontSize + 'px;';
                oNode.setAttribute('orgfontsize', gFontSize);
            }
            if (gAlign != '') {
                //style += 'text-align:' + gAlign + ';';
                oNode.style.textAlign = gAlign;
                oNode.setAttribute('orgalign', gAlign);
            }
            if (gWidth != '') {
                oNode.style.width = gWidth + 'px';
                //style += 'width:' + gWidth + 'px;';
                oNode.setAttribute('orgwidth', gWidth);
            }
            if (gHeight != '') {
                oNode.style.height = gHeight + 'px';
                //style += 'height:' + gHeight + 'px;';
                oNode.setAttribute('orgheight', gHeight);
            }
            if (gType != '') {
                oNode.setAttribute('orgtype', gType);
            }
            //oNode.setAttribute('style',style );
            //oNode.style.cssText=style;//ie7
            console.log(oNode.outerHTML);
            return oNode.outerHTML;
            // editor.execCommand('insertHtml', oNode.outerHTML);
        } catch (e) {
            console.log(e);
            try {
                editor.execCommand('error');
            } catch (e) {
                alert('控件异常，请到 [雷劈网] 反馈或寻求帮助！');
            }
            return false;
        }

    };

    function shown() {
        console.log("I'm showing ..");
        $('#formDesigner').froalaEditor('formDesigner.getSelectedElement', function (data) {
            var popup = data;
            if (popup) {
                oNode = popup;
                var gValue = '';
                if (oNode.getAttribute('value'))
                    gValue = oNode.getAttribute('value').replace('&quot;', "\"");
                var gTitle = oNode.getAttribute('title').replace('&quot;', "\""), gHidden = oNode.getAttribute('orghide'), gFontSize = oNode.getAttribute('orgfontsize'), gAlign = oNode.getAttribute('orgalign'), gWidth = oNode.getAttribute('orgwidth'), gHeight = oNode.getAttribute('orgheight'), gType = oNode.getAttribute('orgtype');
                gValue = gValue == null ? '' : gValue;
                gTitle = gTitle == null ? '' : gTitle;
                $G('orgvalue').value = gValue;
                $G('orgname').value = gTitle;
                if (gHidden == '1') {
                    $G('orghide').checked = true;
                }
                $G('orgfontsize').value = gFontSize;
                $G('orgwidth').value = gWidth;
                $G('orgheight').value = gHeight;
                $G('orgalign').value = gAlign;
                $G('orgtype').value = gType;
            }
        });
    }
    $editor = $('#formDesigner').froalaEditor("formDesigner._ok_callback", ok);
    $editor = $('#formDesigner').froalaEditor("formDesigner._show_callback", shown);
</script>
</body>
</html>